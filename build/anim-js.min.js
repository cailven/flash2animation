!function(){var e={alpha:0,scaleX:1,scaleY:1,x:0,y:0,rotation:0,originX:0,originY:0},r={_anims:[],build:function(e,r){var t=this,i=e.data,n=new Image;if(n.src=e.image,i){for(var a=e.fps||i.stage.fps,s=e.time||0,c=r.createContainer(i.stage.width,i.stage.height),h=[],m=i.layers,u=m.length-1;u>=0;u--){var o=t.parseLayer(r,c,m[u],n,i.texture,a,s);o&&h.push(o)}var _={display:c,timeScale:1,elems:h,tick:function(e){e*=this.timeScale;for(var r=this.elems,t=this.elems.length-1;t>=0;t--)r[t].tick(e)}};return e.container&&r.addDisplay(e.container,c),this._anims.push(_),_}},parseLayer:function(r,t,i,n,a,s){var c=i.frames;if(c&&c.length&&i.image){c.forEach(function(e){e.duration*=1e3/s});var h=a[i.image],m=r.createDisplay(n,[h.x,h.y,h.w,h.h]);r.addDisplay(t,m);var u={_currentTime:0,_currentIndex:-1,display:m,_render:function(t){t?r.renderDisplay(m,t):r.renderDisplay(m,e)},tick:function(e){if(this._currentTime+=e,this._currentTime>=this._currentFrame.duration)return this._currentTime=this._currentTime-this._currentFrame.duration,this.gotoNextFrame(),void 0;if(this._currentFrame.tween&&this._nextFrame&&this._nextFrame.elem){var r=this._currentTime/this._currentFrame.duration,t={};for(var i in this._currentFrame.elem)t[i]=this._currentFrame.elem[i]+r*(this._nextFrame.elem[i]-this._currentFrame.elem[i]);this._render(t)}else this._render(this._currentFrame.elem)},gotoNextFrame:function(){this._currentIndex++,this._currentIndex>=c.length&&(this._currentIndex=0),this._currentFrame=c[this._currentIndex],this._nextFrame=c[this._currentIndex+1],this.tick(0)}};return u.gotoNextFrame(),u}},tick:function(e){for(var r=this._anims,t=r.length-1;t>=0;t--)r[t].tick(e)}};window.Anim=window.Anim||{},Anim.js=r}();