!function(){var n=0,e={build:function(n){var e=this,i=n.data,t=n.image;if(i&&t){var a=n.container||document.body,r=n.fps||i.stage.fps,o=n.time||"infinite";i.layers.forEach(function(n,s){"action"!==n.name&&e.parseLayer(a,n,t,s,i.texture,r,o)})}},parseLayer:function(e,i,t,a,r,o,s){var m=this,d=m.getCSSVendor(),c=i.frames;if(!c||0==c.length)return console.warn("no frames:",i.name),void 0;var g,u=c.reduce(function(n,e){return{duration:n.duration+e.duration}}).duration,l=[],h=0,p=r[i.image];if(!p)return console.warn("no image data! ","layerName:"+i.name," imageName:"+i.image),void 0;c.forEach(function(n){var e="",i=!1;i?e="-"+d+"-animation-timing-function:step-end;\n":g&&!g.tween&&(g.num=h/u*100-1e-4,l.push(g));var t=n.elem;t?l.push({x:t.x-t.originX,y:t.y-t.originY,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,originX:t.originX,originY:t.originY,tween:n.tween,num:h/u*100,alpha:.01*t.alpha,timing:n.tween?"":e}):l.push({num:h/u*100,scaleX:1,scaleY:1,alpha:0,rotation:0,x:0,y:0,originX:0,originY:0,tween:!1,timing:e}),g=m.merge({},l[l.length-1]),h+=n.duration});var f=m.merge({},l[l.length-1]);f.num=100,f.timing="",l.push(f);var w={width:p.w,height:p.h,imgX:p.x,imgY:p.y,index:100-a,duration:u/o,image:t},v=i.name+n++;m.addStyle(l,w,v,s);var x=document.createElement("div");x.className=v+" flashAnim",e.appendChild(x)},addStyle:function(n,e,i,t){var a=this,r=a.getCSSVendor(),o="\n                @-{cssVendor}-keyframes {anim}{\n                {content}\n                }\n                .{anim}{\n                    width:{width}px;\n                    height:{height}px;\n                    background:url({image}) no-repeat;\n                    background-position:-{imgX}px -{imgY}px;\n                    z-index:{index};\n                    -{cssVendor}-animation:{anim} {duration}s linear 0s {time};\n                }\n                ",s="                {num}% {\n                    opacity:{alpha};\n                    -{cssVendor}-transform:translate3d({x}px, {y}px, 0px) rotateZ({rotation}deg) scale3d({scaleX}, {scaleY}, 1);\n                    -{cssVendor}-transform-origin:{originX}px {originY}px;\n                    {timing}                }\n",m="";n.forEach(function(n){n.cssVendor=r,m+=a.renderTpl(s,n)});var d=a.renderTpl(o,a.merge({time:t,anim:i,content:m,cssVendor:r},e)),c=document.getElementById("flashAnimStyle");c=document.createElement("style"),c.innerHTML=d,c.id="flashAnimStyle_"+i,document.getElementsByTagName("head")[0].appendChild(c)},getCSSVendor:function(){if(this._cssVendor)return this._cssVendor;var n=navigator.userAgent;return this._cssVendor=/webkit/i.test(n)?"webkit":/firefox/i.test(n)?"Moz":/msie/i.test(n)?"ms":/opera/i.test(n)?"O":"webkit",this._cssVendor},merge:function(n,e){for(var i in e)n[i]=e[i];return n},renderTpl:function(n,e){e=e||{};for(var i in e){var t=new RegExp("{"+i+"}","g");n=n.replace(t,e[i])}return n}};window.Anim=window.Anim||{},Anim.css=e}(window);