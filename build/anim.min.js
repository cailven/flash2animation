!function(e){var t={merge:function(e,t){for(var i in t)e[i]=t[i]}};e.Anim=t}(this),function(e){var t=e.Anim,i={on:function(e,t){this._listener=this._listener||{},this._listener[e]=this._listener[e]||[],this._listener[e].push(t)},fire:function(e,i){this._listener=this._listener||{};var n=this._listener[e];if(n&&n.length){n=n.slice();for(var a=0,r=n.length;r>a;a++){var s={target:this,type:e};t.merge(s,i||{}),n[a]&&n[a].call(this,s)}}},off:function(e,t){e||(this._listener={}),this._listener=this._listener||{};var i=this._listener[e];if(i)if(t){var n=i.indexOf(t);n>-1&&i.splice(n,1)}else delete this._listener[e]}};t.EventMix=i}(this),function(){var e=0,t="baseAnimStyle",i={build:function(e){var i=this,n=e.data,a=e.image,r=[];if(n&&a){var s=e.container||document.body,o=e.fps||n.stage.fps,m=e.time||"infinite",l=document.createElement("div");l.className="flashAnimContainer",l.style.position="relative",l.style.width=e.data.stage.width+"px",l.style.height=e.data.stage.height+"px",l.style.overflow="hidden",s.appendChild(l),n.layers.forEach(function(e,t){var s=i._parseLayer(l,e,a,t,n.texture,o,m);s&&r.push(s)})}var h=document.getElementById(t);return h||this.createStyle("                 .flashAnim{                     position:absolute;                     left:0px;                     top:0px;                     -webkit-animation-fill-mode: both !important;                     -Moz-animation-fill-mode: both !important;                     animation-fill-mode: both !important;                 }             ",t),{play:function(){r.forEach(function(e){var t=e.getAttribute("data-anim");e.className="flashAnim",setTimeout(function(){e.className=t+" flashAnim"},100),e.style[i.getCSSVendor()+"AnimationPlayState"]="running"})},stop:function(){r.forEach(function(e){var t=e.getAttribute("data-anim");e.className="flashAnim",setTimeout(function(){e.className=t+" flashAnim"},100),e.style[i.getCSSVendor()+"AnimationPlayState"]="paused"})},pause:function(){r.forEach(function(e){e.style[i.getCSSVendor()+"AnimationPlayState"]="paused"})},resume:function(){r.forEach(function(e){e.style[i.getCSSVendor()+"AnimationPlayState"]="running"})}}},_parseLayer:function(t,i,n,a,r,s,o){var m=this,l=m.getCSSVendor(),h=i.frames;if(!h||0==h.length)return console.warn("no frames:",i.name),void 0;var c,d=h.reduce(function(e,t){return{duration:e.duration+t.duration}}).duration,u=[],f=0,g=r[i.image];if(!g)return console.warn("no image data! ","layerName:"+i.name," imageName:"+i.image),void 0;h.forEach(function(e){var t="",i=!1;i?t="-"+l+"-animation-timing-function:step-end;\n":c&&!c.tween&&(c.num=f/d*100-1e-4,u.push(c));var n=e.elem;n?u.push({x:n.x-n.originX,y:n.y-n.originY,scaleX:n.scaleX,scaleY:n.scaleY,rotation:n.rotation,originX:n.originX,originY:n.originY,tween:e.tween,num:f/d*100,alpha:.01*n.alpha,timing:e.tween?"":t}):u.push({num:f/d*100,scaleX:1,scaleY:1,alpha:0,rotation:0,x:0,y:0,originX:0,originY:0,tween:!1,timing:t}),c=m.merge({},u[u.length-1]),f+=e.duration});var p=m.merge({},u[u.length-1]);p.num=100,p.timing="",u.push(p);var y={width:g.w,height:g.h,imgX:g.x,imgY:g.y,index:100-a,duration:d/s,image:n},v=i.name+e++;m.addStyle(u,y,v,o);var _=document.createElement("div");return _.className=v+" flashAnim",_.setAttribute("data-anim",v),_.setAttribute("data-layer",i.name),t.appendChild(_),_},addStyle:function(e,t,i,n){var a=this,r=a.getCSSVendor(),s="\n            @-{cssVendor}-keyframes {anim}{\n            {content}\n            }\n            .{anim}{\n                width:{width}px;\n                height:{height}px;\n                background:url({image}) no-repeat;\n                background-position:-{imgX}px -{imgY}px;\n                z-index:{index};\n                -{cssVendor}-animation:{anim} {duration}s linear 0s {time};\n            }\n            ",o="            {num}% {\n                opacity:{alpha};\n                -{cssVendor}-transform:translate3d({x}px, {y}px, 0px) rotateZ({rotation}deg) scale3d({scaleX}, {scaleY}, 1);\n                -{cssVendor}-transform-origin:{originX}px {originY}px;\n                {timing}            }\n",m="";e.forEach(function(e){e.cssVendor=r,m+=a.renderTpl(o,e)});var l=a.renderTpl(s,a.merge({time:n,anim:i,content:m,cssVendor:r},t));this.createStyle(l,"flashAnimStyle_"+i)},createStyle:function(e,t){var i=document.createElement("style");i.innerHTML=e,i.id=t,document.getElementsByTagName("head")[0].appendChild(i)},getCSSVendor:function(){if(this._cssVendor)return this._cssVendor;var e=navigator.userAgent;return this._cssVendor=/webkit/i.test(e)?"webkit":/firefox/i.test(e)?"Moz":/msie/i.test(e)?"ms":/opera/i.test(e)?"O":"webkit",this._cssVendor},merge:function(e,t){for(var i in t)e[i]=t[i];return e},renderTpl:function(e,t){t=t||{};for(var i in t){var n=new RegExp("{"+i+"}","g");e=e.replace(n,t[i])}return e}};Anim.AnimCSS=i}(this),function(e){function t(e){this._diaplayData=null,this._currentTime=0,this._currentIndex=0,this.bridge=e.bridge,this.display=e.display,this.frames=e.frames,this.layer=e.layer,this.frameTime=e.frameTime,this.name=e.name,i.merge(this,n)}var i=e.Anim,n=i.EventMix,a={alpha:0,scaleX:1,scaleY:1,x:0,y:0,rotation:0,originX:0,originY:0};t.prototype={constructor:t,_renderDisplay:function(e){this._diaplayData!==e&&(this._diaplayData=e,e?this.bridge.renderDisplay(this.display,e):this.bridge.renderDisplay(this.display,a))},gotoTime:function(e){var t,i,n,a,r=this.frames;t=e>=this._currentTime?this._currentIndex:0,this._currentTime=e;for(var s=t,o=r.length;o>s;s++){var m=r[s];if(e<=m.endTime){i=e-m.startTime,n=m,a=r[s+1],this._currentIndex=s;break}}if(n.tween&&a&&a.elem){var l=i/n.duration,h={};for(var s in n.elem)h[s]=n.elem[s]+l*(a.elem[s]-n.elem[s]);this._renderDisplay(h)}else this._renderDisplay(n.elem)},gotoFrame:function(e){this.gotoTime(e*this.frameTime)},getTotalTime:function(){return this.frames[this.frames.length-1].endTime}},i.AnimElem=t}(this),function(e,t){function i(e){this.elems=e.elems||[],this.time=e.time,this.frameTime=e.frameTime,this.timeScale=e.timeScale||1,this.display=e.display,this._isPlay=!1,this._elemDict={};for(var t=0,i=this.elems.length;i>t;t++)this._elemDict[this.elems[t].name]=this.elems[t];n.merge(this,a),this._currentTime=0,this._totalTime=this.elems[0].getTotalTime()}var n=e.Anim,a=n.EventMix,r=n.AnimElem;i.prototype={constructor:i,tick:function(e){if(this._isPlay){e*=this.timeScale;var t=this._currentTime;t+=e,t>this._totalTime&&(this.fire("animationEnd"),this.time--,this.time<=0?this.pause():t=this._totalTime-t),this.gotoTime(t)}},play:function(e,i){this.gotoFrame(e),this._isPlay=!0,this.time!==t&&(this.time=i||1/0)},stop:function(e){this.gotoFrame(e),this._isPlay=!1},pause:function(){this._isPlay=!1},resume:function(){this._isPlay=!0},getElem:function(e){return this._elemDict[e]},gotoTime:function(e){var e=e||0;e>this._totalTime&&(e=this._totalTime),this._currentTime=e;for(var t=this.elems,i=this.elems.length-1;i>=0;i--)t[i].gotoTime(e)},gotoFrame:function(e){e=e||0,this.gotoTime(e*this.frameTime)}},i._anims=[],i.build=function(e,t){var a=this,r=e.data,s=new Image;if(s.src=e.image,t=t||n.domBridge,r){for(var o=e.fps||r.stage.fps,m=1e3/o,l=e.time||1/0,h=t.createContainer(r.stage.width,r.stage.height),c=[],d=r.layers,u=d.length-1;u>=0;u--){var f=a._parseLayer(t,h,d[u],s,r.texture,m);f&&c.push(f)}var g=new i({timeScale:1,display:h,elems:c,time:l,frameTime:m});return e.container&&t.addDisplay(e.container,h),this._anims.push(g),g}},i.tick=function(e){for(var t=this._anims,i=t.length-1;i>=0;i--)t[i].tick(e)},i._parseLayer=function(e,t,i,n,a,s){var o=i.frames;if(o&&o.length&&i.image){for(var m=0,l=0,h=o.length;h>l;l++)o[l].duration*=s,o[l].startTime=m,m+=o[l].duration,o[l].endTime=m;var c=a[i.image],d=e.createDisplay(n,[c.x,c.y,c.w,c.h]);e.addDisplay(t,d);var u=new r({bridge:e,display:d,frames:o,layer:i,frameTime:s,name:i.name});return u.gotoTime(0),u}console.warn("no frames:"+i.name)},n.AnimJS=i}(this),function(e,t){var i=e.Anim,n=navigator.userAgent,a=/webkit/i.test(n)?"webkit":/firefox/i.test(n)?"Moz":/msie/i.test(n)?"ms":/opera/i.test(n)?"O":"webkit",r={createContainer:function(e,t){var i=document.createElement("div");return i.style.width=e+"px",i.style.height=t+"px",i.style.position="relative",i.style.overflow="hidden",i.className="flashAnimContainer",i},createDisplay:function(e,t){var i=document.createElement("div"),n=i.style;return n.width=t[2]+"px",n.height=t[3]+"px",n.background="url("+e.src+") no-repeat",n.backgroundPosition="-"+t[0]+"px -"+t[1]+"px",n.position="absolute",n.left="0px",n.top="0px",i},addDisplay:function(e,i,n){n===t&&(n=e.children?e.children.length:0),i.style.zIndex=n,e.appendChild(i)},renderDisplay:function(e,t){var i=e.style;i[a+"TransformOrigin"]=t.originX+"px "+t.originY+"px",i.opacity=.01*t.alpha,i[a+"Transform"]="translate3d("+(t.x-t.originX)+"px,"+(t.y-t.originY)+"px,0px) rotate3d(0,0,1,"+t.rotation+"deg) scale3d("+t.scaleX+","+t.scaleY+",1)"}};i.domBridge=r}(this);